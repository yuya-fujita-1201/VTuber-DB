name = "vtuber-db"
main = "src/index.js"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# D1 データベース
[[d1_databases]]
binding = "DB"
database_name = "vtuber-db"
database_id = "e262a8e1-e214-4536-9a9f-81288b1668df"

# 環境変数（ローカル開発用は .dev.vars に記載）
[vars]
ENVIRONMENT = "production"

# R2 ストレージ（画像保存用）
[[r2_buckets]]
binding = "IMAGES"
bucket_name = "vtuber-images"

# KV（キャッシュ用）
[[kv_namespaces]]
binding = "CACHE"
id = "05bfbf27ae194eadab654b229bb8224f"

# Cron Triggers（定期実行）
[triggers]
crons = [
  "0 0 * * 7",   # 週次データ収集: 毎週日曜日 0:00 UTC (JST 9:00)
  "0 2 * * *",   # 日次データ更新: 毎日 2:00 UTC (JST 11:00)
  "0 4 * * *",   # 日次メンテナンス: 毎日 4:00 UTC (JST 13:00)
]
